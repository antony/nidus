<header class="toolbar toolbar-header">
  <h1 class="title">Generate</h1>
</header>
<div class="window-content">
  <div>
    <form action="#">
      <p>
        Enter a keyword to generate a password. For example the url of a site you are trying to log into.
      </p>
      <div class="form-group">
        <label>Enter seed</label>
        <input class="form-control" bind:value="keyword" type="text" on:keyup="generate(event)" />
      </div>
    </form>
  </div>
  <div>
    {{#if generated}}
    <p>
      Your generated passwords
    </p>
    <dl>
      <dd>
        Simple:
      </dd>
      <dt>
        {{ simple }}
        <span class="hover-hidden" on:click="copy(simple)">&#x1f4cb;</span>
      </dt>
      <dd>
        Complex:
      </dd>
      <dt>
        {{ complex }}
        <span class="hover-hidden" on:click="copy(complex)">&#x1f4cb;</span>
      </dt>
      <dd>
        Readable:
      </dd>
      <dt>
        {{ readable }}
        <span class="hover-hidden" on:click="copy(readable)">&#x1f4cb;</span>
      </dt>
    </dl>
    {{/if}}
  </div>
</div>

<style>
  dl > dd {
    font-weight: bold;
    margin: 2vw 0 0 0;
  }
  dl > dt {
    background-color: lightgoldenrodyellow;
    border: 1px solid lightgray;
    padding: 2vw;
  }
  dt > .hover-hidden {
    font-weight: bold;
    visibility: hidden;
    float: right;
  }
  dt:hover > .hover-hidden {
    visibility: visible;
  }
</style>

<script>
  const { ipcRenderer, clipboard } = window.require('electron')

  export default {
    data () {
      return {
        generated: false,
        keyword: ''
      }
    },

    oncreate () {
      ipcRenderer.on('generate:results', (event, { simple, complex, readable }) => {
        this.set({ generated: true, simple, complex, readable })
			})
    },

    methods: {
      generate (event) {
        if (event.code === 'Enter') {
          const keyword = this.get('keyword')
          ipcRenderer.send('generate', { keyword })
          event.preventDefault()
        }
        return false
      },
      copy (text) {
        clipboard.writeText(text)
      }
    }
  }
</script>