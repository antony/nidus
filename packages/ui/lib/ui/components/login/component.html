<header class="toolbar toolbar-header">
  <h1 class="title">Unlock</h1>
</header>
<div class="window-content">
  <form action="#">
    {{#if message}}
    <p>
      {{ message }}
    </p>
    {{/if}}
    <div class="form-group">
      <label>Master password</label>
      <input class="form-control" bind:value="password" type="password" on:keyup="login(event)" />
    </div>
  </form>
</div>

<script>
  const { ipcRenderer } = window.require('electron')

  export default {
    data () {
      return {
        password: '' 
      }
    },

    oncreate () {
      ipcRenderer.on('login:error', (event, { message }) => {
        this.set({ message })
			})
    },

    methods: {
      login (event) {
        if (event.code === 'Enter') {
          const password = this.get('password')
          ipcRenderer.send('login', { password })
        }
        event.preventDefault()
        return false
      }
    }
  }
</script>